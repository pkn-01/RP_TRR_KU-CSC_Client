[{"filePath":"C:\\TRR Internship\\frontend\\src\\app\\admin\\audit-logs\\page.tsx","messages":[{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nC:\\TRR Internship\\frontend\\src\\app\\admin\\audit-logs\\page.tsx:336:12\n  334 |         {/* Icon */}\n  335 |         <div className={`p-3 rounded-lg ${getActionColor(log.action)}`}>\n> 336 |           <Icon size={20} />\n      |            ^^^^ This component is created during render\n  337 |         </div>\n  338 |\n  339 |         {/* Content */}\n\nC:\\TRR Internship\\frontend\\src\\app\\admin\\audit-logs\\page.tsx:329:16\n  327 |\n  328 | function LogEntry({ log }: { log: AuditLog }) {\n> 329 |   const Icon = getActionIcon(log.action);\n      |                ^^^^^^^^^^^^^^^^^^^^^^^^^ The component is created during render here\n  330 |\n  331 |   return (\n  332 |     <div className=\"bg-white rounded-xl shadow-md border border-zinc-200 hover:shadow-lg transition-all p-6\">","line":336,"column":12,"nodeType":null,"endLine":336,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useMemo } from \"react\";\r\nimport {\r\n  FileSearch,\r\n  Search,\r\n  Filter,\r\n  Download,\r\n  AlertCircle,\r\n  CheckCircle,\r\n  XCircle,\r\n  Edit,\r\n  Trash2,\r\n  UserPlus,\r\n  LogIn,\r\n  LogOut,\r\n  Settings,\r\n  Calendar,\r\n  Shield,\r\n} from \"lucide-react\";\r\n\r\n// Types\r\ninterface AuditLog {\r\n  id: string;\r\n  userId: number;\r\n  userName: string;\r\n  userEmail: string;\r\n  action: ActionType;\r\n  module: ModuleType;\r\n  description: string;\r\n  ipAddress: string;\r\n  timestamp: Date;\r\n  status: \"SUCCESS\" | \"FAILED\" | \"WARNING\";\r\n}\r\n\r\ntype ActionType =\r\n  | \"CREATE\"\r\n  | \"UPDATE\"\r\n  | \"DELETE\"\r\n  | \"LOGIN\"\r\n  | \"LOGOUT\"\r\n  | \"VIEW\"\r\n  | \"EXPORT\";\r\ntype ModuleType = \"REPAIR\" | \"LOAN\" | \"USER\" | \"SETTINGS\" | \"SYSTEM\";\r\n\r\n// Mock data α╕¬α╕│α╕½α╕úα╕▒α╕Ü demo\r\nconst generateMockLogs = (): AuditLog[] => {\r\n  const actions: ActionType[] = [\r\n    \"CREATE\",\r\n    \"UPDATE\",\r\n    \"DELETE\",\r\n    \"LOGIN\",\r\n    \"LOGOUT\",\r\n    \"VIEW\",\r\n    \"EXPORT\",\r\n  ];\r\n  const modules: ModuleType[] = [\r\n    \"REPAIR\",\r\n    \"LOAN\",\r\n    \"USER\",\r\n    \"SETTINGS\",\r\n    \"SYSTEM\",\r\n  ];\r\n  const users = [\r\n    { id: 1, name: \"Admin User\", email: \"admin@example.com\" },\r\n    { id: 2, name: \"IT Support\", email: \"it@example.com\" },\r\n    { id: 3, name: \"John Doe\", email: \"john@example.com\" },\r\n  ];\r\n\r\n  const logs: AuditLog[] = [];\r\n  const now = new Date();\r\n\r\n  for (let i = 0; i < 50; i++) {\r\n    const user = users[Math.floor(Math.random() * users.length)];\r\n    const action = actions[Math.floor(Math.random() * actions.length)];\r\n    const auditModule = modules[Math.floor(Math.random() * modules.length)];\r\n    const hoursAgo = Math.floor(Math.random() * 48);\r\n\r\n    logs.push({\r\n      id: `log-${i + 1}`,\r\n      userId: user.id,\r\n      userName: user.name,\r\n      userEmail: user.email,\r\n      action,\r\n      module: auditModule,\r\n      description: getDescription(action, auditModule),\r\n      ipAddress: `192.168.1.${Math.floor(Math.random() * 255)}`,\r\n      timestamp: new Date(now.getTime() - hoursAgo * 60 * 60 * 1000),\r\n      status:\r\n        Math.random() > 0.9\r\n          ? \"FAILED\"\r\n          : Math.random() > 0.95\r\n            ? \"WARNING\"\r\n            : \"SUCCESS\",\r\n    });\r\n  }\r\n\r\n  return logs.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\r\n};\r\n\r\nconst getDescription = (action: ActionType, module: ModuleType): string => {\r\n  const descriptions: Record<string, string> = {\r\n    \"CREATE-REPAIR\": \"α╕¬α╕úα╣ëα╕▓α╕çα╕úα╕▓α╕óα╕üα╕▓α╕úα╕ïα╣êα╕¡α╕íα╣âα╕½α╕íα╣ê\",\r\n    \"UPDATE-REPAIR\": \"α╕¡α╕▒α╕₧α╣Çα╕öα╕òα╕¬α╕ûα╕▓α╕Öα╕░α╕çα╕▓α╕Öα╕ïα╣êα╕¡α╕í\",\r\n    \"DELETE-REPAIR\": \"α╕Ñα╕Üα╕úα╕▓α╕óα╕üα╕▓α╕úα╕ïα╣êα╕¡α╕í\",\r\n    \"CREATE-LOAN\": \"α╕¬α╕úα╣ëα╕▓α╕çα╕úα╕▓α╕óα╕üα╕▓α╕úα╕óα╕╖α╕íα╣âα╕½α╕íα╣ê\",\r\n    \"UPDATE-LOAN\": \"α╕¡α╕▒α╕₧α╣Çα╕öα╕òα╕¬α╕ûα╕▓α╕Öα╕░α╕üα╕▓α╕úα╕óα╕╖α╕í\",\r\n    \"DELETE-LOAN\": \"α╕Ñα╕Üα╕úα╕▓α╕óα╕üα╕▓α╕úα╕óα╕╖α╕í\",\r\n    \"CREATE-USER\": \"α╕¬α╕úα╣ëα╕▓α╕çα╕£α╕╣α╣ëα╣âα╕èα╣ëα╣âα╕½α╕íα╣ê\",\r\n    \"UPDATE-USER\": \"α╣üα╕üα╣ëα╣äα╕éα╕éα╣ëα╕¡α╕íα╕╣α╕Ñα╕£α╕╣α╣ëα╣âα╕èα╣ë\",\r\n    \"DELETE-USER\": \"α╕Ñα╕Üα╕Üα╕▒α╕ìα╕èα╕╡α╕£α╕╣α╣ëα╣âα╕èα╣ë\",\r\n    \"LOGIN-SYSTEM\": \"α╣Çα╕éα╣ëα╕▓α╕¬α╕╣α╣êα╕úα╕░α╕Üα╕Ü\",\r\n    \"LOGOUT-SYSTEM\": \"α╕¡α╕¡α╕üα╕êα╕▓α╕üα╕úα╕░α╕Üα╕Ü\",\r\n    \"UPDATE-SETTINGS\": \"α╣üα╕üα╣ëα╣äα╕éα╕üα╕▓α╕úα╕òα╕▒α╣ëα╕çα╕äα╣êα╕▓α╕úα╕░α╕Üα╕Ü\",\r\n    \"VIEW-REPAIR\": \"α╕öα╕╣α╕úα╕▓α╕óα╕Ñα╕░α╣Çα╕¡α╕╡α╕óα╕öα╕çα╕▓α╕Öα╕ïα╣êα╕¡α╕í\",\r\n    \"EXPORT-REPAIR\": \"Export α╕éα╣ëα╕¡α╕íα╕╣α╕Ñα╕çα╕▓α╕Öα╕ïα╣êα╕¡α╕í\",\r\n  };\r\n\r\n  return descriptions[`${action}-${module}`] || `${action} on ${module}`;\r\n};\r\n\r\nexport default function AuditLogsPage() {\r\n  const [logs] = useState<AuditLog[]>(generateMockLogs());\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [filterAction, setFilterAction] = useState<ActionType | \"ALL\">(\"ALL\");\r\n  const [filterModule, setFilterModule] = useState<ModuleType | \"ALL\">(\"ALL\");\r\n  const [filterStatus, setFilterStatus] = useState<\r\n    \"ALL\" | \"SUCCESS\" | \"FAILED\" | \"WARNING\"\r\n  >(\"ALL\");\r\n\r\n  // Filtered logs\r\n  const filteredLogs = useMemo(() => {\r\n    return logs.filter((log) => {\r\n      const matchesSearch =\r\n        searchTerm === \"\" ||\r\n        log.userName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        log.userEmail.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        log.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        log.ipAddress.includes(searchTerm);\r\n\r\n      const matchesAction =\r\n        filterAction === \"ALL\" || log.action === filterAction;\r\n      const matchesModule =\r\n        filterModule === \"ALL\" || log.module === filterModule;\r\n      const matchesStatus =\r\n        filterStatus === \"ALL\" || log.status === filterStatus;\r\n\r\n      return matchesSearch && matchesAction && matchesModule && matchesStatus;\r\n    });\r\n  }, [logs, searchTerm, filterAction, filterModule, filterStatus]);\r\n\r\n  const handleExport = () => {\r\n    // Mock export function\r\n    alert(\"Export functionality - α╕êα╕░ export α╕éα╣ëα╕¡α╕íα╕╣α╕Ñ Audit Logs α╣Çα╕¢α╣çα╕Ö CSV\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100\">\r\n      {/* Header */}\r\n      <div className=\"bg-white border-b border-zinc-200 sticky top-0 z-10\">\r\n        <div className=\"px-6 lg:px-8 py-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg\">\r\n                <FileSearch size={24} className=\"text-white\" />\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-zinc-900\">Audit Logs</h1>\r\n                <p className=\"text-sm text-zinc-500\">\r\n                  α╕òα╕┤α╕öα╕òα╕▓α╕íα╕üα╕┤α╕êα╕üα╕úα╕úα╕íα╣üα╕Ñα╕░α╕üα╕▓α╕úα╣Çα╕¢α╕Ñα╕╡α╣êα╕óα╕Öα╣üα╕¢α╕Ñα╕çα╣âα╕Öα╕úα╕░α╕Üα╕Ü\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleExport}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors\"\r\n            >\r\n              <Download size={18} />\r\n              <span className=\"hidden sm:inline\">Export CSV</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"px-6 lg:px-8 py-8\">\r\n        {/* Search and Filters */}\r\n        <div className=\"bg-white rounded-xl shadow-md border border-zinc-200 p-6 mb-6\">\r\n          {/* Search Bar */}\r\n          <div className=\"mb-4\">\r\n            <div className=\"relative\">\r\n              <Search\r\n                size={20}\r\n                className=\"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400\"\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"α╕äα╣ëα╕Öα╕½α╕▓α╕öα╣ëα╕ºα╕óα╕èα╕╖α╣êα╕¡α╕£α╕╣α╣ëα╣âα╕èα╣ë, α╕¡α╕╡α╣Çα╕íα╕Ñ, α╕äα╕│α╕¡α╕ÿα╕┤α╕Üα╕▓α╕ó α╕½α╕úα╕╖α╕¡ IP address...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-3 border border-zinc-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Filters */}\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <Filter size={16} className=\"text-zinc-500\" />\r\n            <span className=\"text-sm font-medium text-zinc-700\">Filters:</span>\r\n          </div>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\r\n            {/* Action Filter */}\r\n            <select\r\n              value={filterAction}\r\n              onChange={(e) =>\r\n                setFilterAction(e.target.value as ActionType | \"ALL\")\r\n              }\r\n              className=\"px-3 py-2 border border-zinc-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm\"\r\n            >\r\n              <option value=\"ALL\">All Actions</option>\r\n              <option value=\"CREATE\">Create</option>\r\n              <option value=\"UPDATE\">Update</option>\r\n              <option value=\"DELETE\">Delete</option>\r\n              <option value=\"LOGIN\">Login</option>\r\n              <option value=\"LOGOUT\">Logout</option>\r\n              <option value=\"VIEW\">View</option>\r\n              <option value=\"EXPORT\">Export</option>\r\n            </select>\r\n\r\n            {/* Module Filter */}\r\n            <select\r\n              value={filterModule}\r\n              onChange={(e) =>\r\n                setFilterModule(e.target.value as ModuleType | \"ALL\")\r\n              }\r\n              className=\"px-3 py-2 border border-zinc-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm\"\r\n            >\r\n              <option value=\"ALL\">All Modules</option>\r\n              <option value=\"REPAIR\">Repair</option>\r\n              <option value=\"LOAN\">Loan</option>\r\n              <option value=\"USER\">User</option>\r\n              <option value=\"SETTINGS\">Settings</option>\r\n              <option value=\"SYSTEM\">System</option>\r\n            </select>\r\n\r\n            {/* Status Filter */}\r\n            <select\r\n              value={filterStatus}\r\n              onChange={(e) =>\r\n                setFilterStatus(\r\n                  e.target.value as \"ALL\" | \"SUCCESS\" | \"FAILED\" | \"WARNING\",\r\n                )\r\n              }\r\n              className=\"px-3 py-2 border border-zinc-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm\"\r\n            >\r\n              <option value=\"ALL\">All Status</option>\r\n              <option value=\"SUCCESS\">Success</option>\r\n              <option value=\"FAILED\">Failed</option>\r\n              <option value=\"WARNING\">Warning</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* Results count */}\r\n          <div className=\"mt-4 text-sm text-zinc-600\">\r\n            α╣üα╕¬α╕öα╕ç <span className=\"font-semibold\">{filteredLogs.length}</span>{\" \"}\r\n            α╕úα╕▓α╕óα╕üα╕▓α╕ú\r\n            {searchTerm ||\r\n            filterAction !== \"ALL\" ||\r\n            filterModule !== \"ALL\" ||\r\n            filterStatus !== \"ALL\"\r\n              ? ` α╕êα╕▓α╕üα╕ùα╕▒α╣ëα╕çα╕½α╕íα╕ö ${logs.length} α╕úα╕▓α╕óα╕üα╕▓α╕ú`\r\n              : \"\"}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timeline */}\r\n        <div className=\"space-y-4\">\r\n          {filteredLogs.length === 0 ? (\r\n            <div className=\"bg-white rounded-xl shadow-md border border-zinc-200 p-12 text-center\">\r\n              <AlertCircle size={48} className=\"text-zinc-300 mx-auto mb-4\" />\r\n              <p className=\"text-zinc-500\">α╣äα╕íα╣êα╕₧α╕Üα╕úα╕▓α╕óα╕üα╕▓α╕úα╕ùα╕╡α╣êα╕òα╕úα╕çα╕üα╕▒α╕Üα╕üα╕▓α╕úα╕äα╣ëα╕Öα╕½α╕▓</p>\r\n            </div>\r\n          ) : (\r\n            filteredLogs.map((log) => <LogEntry key={log.id} log={log} />)\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Log Entry Component\r\n// Helper functions for LogEntry\r\nconst getActionIcon = (action: ActionType) => {\r\n  const icons = {\r\n    CREATE: UserPlus,\r\n    UPDATE: Edit,\r\n    DELETE: Trash2,\r\n    LOGIN: LogIn,\r\n    LOGOUT: LogOut,\r\n    VIEW: FileSearch,\r\n    EXPORT: Download,\r\n  };\r\n  return icons[action] || Settings;\r\n};\r\n\r\nconst getActionColor = (action: ActionType) => {\r\n  const colors = {\r\n    CREATE: \"text-green-600 bg-green-50\",\r\n    UPDATE: \"text-blue-600 bg-blue-50\",\r\n    DELETE: \"text-red-600 bg-red-50\",\r\n    LOGIN: \"text-indigo-600 bg-indigo-50\",\r\n    LOGOUT: \"text-zinc-600 bg-zinc-50\",\r\n    VIEW: \"text-purple-600 bg-purple-50\",\r\n    EXPORT: \"text-orange-600 bg-orange-50\",\r\n  };\r\n  return colors[action] || \"text-zinc-600 bg-zinc-50\";\r\n};\r\n\r\nconst getStatusIcon = (status: string) => {\r\n  if (status === \"SUCCESS\")\r\n    return <CheckCircle size={16} className=\"text-green-500\" />;\r\n  if (status === \"FAILED\")\r\n    return <XCircle size={16} className=\"text-red-500\" />;\r\n  return <AlertCircle size={16} className=\"text-yellow-500\" />;\r\n};\r\n\r\nfunction LogEntry({ log }: { log: AuditLog }) {\r\n  const Icon = getActionIcon(log.action);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-md border border-zinc-200 hover:shadow-lg transition-all p-6\">\r\n      <div className=\"flex items-start gap-4\">\r\n        {/* Icon */}\r\n        <div className={`p-3 rounded-lg ${getActionColor(log.action)}`}>\r\n          <Icon size={20} />\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 min-w-0\">\r\n          <div className=\"flex items-start justify-between gap-4 mb-2\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <span className=\"font-semibold text-zinc-900\">\r\n                  {log.userName}\r\n                </span>\r\n                <span className=\"text-sm text-zinc-400\">ΓÇó</span>\r\n                <span className=\"text-sm text-zinc-500\">{log.userEmail}</span>\r\n              </div>\r\n              <p className=\"text-zinc-700\">{log.description}</p>\r\n            </div>\r\n            {getStatusIcon(log.status)}\r\n          </div>\r\n\r\n          {/* Metadata */}\r\n          <div className=\"flex flex-wrap items-center gap-4 text-sm text-zinc-500\">\r\n            <div className=\"flex items-center gap-1\">\r\n              <Calendar size={14} />\r\n              <span>{log.timestamp.toLocaleString(\"th-TH\")}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Shield size={14} />\r\n              <span>IP: {log.ipAddress}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"px-2 py-0.5 bg-zinc-100 rounded text-xs font-medium\">\r\n                {log.module}\r\n              </span>\r\n              <span className=\"px-2 py-0.5 bg-zinc-100 rounded text-xs font-medium\">\r\n                {log.action}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]}]
